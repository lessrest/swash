// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "fmt"

func TerminalPage(sessionID string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"><title>swash - ")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 string
		templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(sessionID[:8])
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `cmd/swash/templates/terminal.templ`, Line: 11, Col: 33}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "...</title><link rel=\"stylesheet\" href=\"https://unpkg.com/xterm@5.3.0/css/xterm.css\"><style>\n\t\t\t\t@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap');\n\t\t\t\t* { box-sizing: border-box; margin: 0; padding: 0; }\n\t\t\t\tbody {\n\t\t\t\t\tbackground: #0f0f0f;\n\t\t\t\t\tmin-height: 100vh;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t\theader {\n\t\t\t\t\tbackground: #1a1a1a;\n\t\t\t\t\tborder-bottom: 1px solid #333;\n\t\t\t\t\tpadding: 0.5rem 1rem;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tfont-family: system-ui, -apple-system, sans-serif;\n\t\t\t\t}\n\t\t\t\theader a {\n\t\t\t\t\tcolor: #4dabf7;\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\tfont-size: 0.9rem;\n\t\t\t\t}\n\t\t\t\theader a:hover { text-decoration: underline; }\n\t\t\t\theader .session-id {\n\t\t\t\t\tcolor: #888;\n\t\t\t\t\tfont-family: monospace;\n\t\t\t\t\tfont-size: 0.85rem;\n\t\t\t\t}\n\t\t\t\t#terminal-container {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tpadding: 0.5rem;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t\t\t\t#terminal {\n\t\t\t\t\tborder: 1px solid #333;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tpadding: 0.5rem;\n\t\t\t\t\tbackground: #000;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: calc(100vw - 1rem);\n\t\t\t\t\tmax-height: calc(100vh - 4rem);\n\t\t\t\t}\n\t\t\t\t.xterm { height: 100%; }\n\t\t\t\t#status {\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\tbottom: 1rem;\n\t\t\t\t\tright: 1rem;\n\t\t\t\t\tbackground: rgba(0,0,0,0.8);\n\t\t\t\t\tcolor: #888;\n\t\t\t\t\tpadding: 0.5rem 1rem;\n\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\tfont-family: system-ui;\n\t\t\t\t\tfont-size: 0.8rem;\n\t\t\t\t\topacity: 0;\n\t\t\t\t\ttransition: opacity 0.3s;\n\t\t\t\t}\n\t\t\t\t#status.visible { opacity: 1; }\n\t\t\t\t#status.connected { color: #51cf66; }\n\t\t\t\t#status.disconnected { color: #ff6b6b; }\n\t\t\t</style></head><body><header><a href=\"/sessions\">‚Üê Back to Sessions</a> <span class=\"session-id\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var3 string
		templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(sessionID[:8])
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `cmd/swash/templates/terminal.templ`, Line: 81, Col: 44}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "...</span> <a href=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var4 templ.SafeURL
		templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/sessions/%s", sessionID)))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `cmd/swash/templates/terminal.templ`, Line: 82, Col: 67}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "\">Details</a></header><div id=\"terminal-container\"><div id=\"terminal\"></div></div><div id=\"status\"></div><script src=\"https://unpkg.com/xterm@5.3.0/lib/xterm.js\"></script><script src=\"https://unpkg.com/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js\"></script><script src=\"https://unpkg.com/xterm-addon-webgl@0.16.0/lib/xterm-addon-webgl.js\"></script><script>\n\t\t\t\tconst sessionID = { fmt.Sprintf(\"%q\", sessionID) };\n\t\t\t\tconst statusEl = document.getElementById('status');\n\n\t\t\t\tfunction showStatus(text, className) {\n\t\t\t\t\tstatusEl.textContent = text;\n\t\t\t\t\tstatusEl.className = 'visible ' + className;\n\t\t\t\t\tsetTimeout(() => statusEl.className = '', 2000);\n\t\t\t\t}\n\n\t\t\t\tconst term = new Terminal({\n\t\t\t\t\tcursorBlink: true,\n\t\t\t\t\tfontFamily: '\"JetBrains Mono\", \"Fira Code\", monospace',\n\t\t\t\t\tfontSize: 14,\n\t\t\t\t\ttheme: {\n\t\t\t\t\t\tbackground: '#000000',\n\t\t\t\t\t\tforeground: '#e0e0e0',\n\t\t\t\t\t\tcursor: '#4dabf7',\n\t\t\t\t\t\tselection: 'rgba(77, 171, 247, 0.3)'\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst fitAddon = new FitAddon.FitAddon();\n\t\t\t\tterm.loadAddon(fitAddon);\n\t\t\t\tterm.open(document.getElementById('terminal'));\n\n\t\t\t\ttry {\n\t\t\t\t\tconst webglAddon = new WebglAddon.WebglAddon();\n\t\t\t\t\twebglAddon.onContextLoss(() => webglAddon.dispose());\n\t\t\t\t\tterm.loadAddon(webglAddon);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn('WebGL addon failed to load:', e);\n\t\t\t\t}\n\n\t\t\t\tfitAddon.fit();\n\n\t\t\t\tconst protocol = location.protocol === 'https:' ? 'wss:' : 'ws:';\n\t\t\t\tconst ws = new WebSocket(protocol + '//' + location.host + '/sessions/' + sessionID + '/attach');\n\n\t\t\t\tws.onopen = () => {\n\t\t\t\t\tshowStatus('Connected', 'connected');\n\t\t\t\t\tsendResize();\n\t\t\t\t};\n\n\t\t\t\tws.onmessage = (e) => term.write(e.data);\n\n\t\t\t\tws.onclose = () => {\n\t\t\t\t\tshowStatus('Disconnected', 'disconnected');\n\t\t\t\t\tterm.write('\\r\\n\\x1b[90m[session disconnected]\\x1b[0m\\r\\n');\n\t\t\t\t};\n\n\t\t\t\tws.onerror = () => {\n\t\t\t\t\tshowStatus('Connection error', 'disconnected');\n\t\t\t\t};\n\n\t\t\t\tterm.onData((data) => {\n\t\t\t\t\tif (ws.readyState === WebSocket.OPEN) {\n\t\t\t\t\t\tws.send(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfunction sendResize() {\n\t\t\t\t\tfitAddon.fit();\n\t\t\t\t\tif (ws.readyState === WebSocket.OPEN) {\n\t\t\t\t\t\tws.send(JSON.stringify({\n\t\t\t\t\t\t\ttype: 'resize',\n\t\t\t\t\t\t\trows: term.rows,\n\t\t\t\t\t\t\tcols: term.cols\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\twindow.addEventListener('resize', () => {\n\t\t\t\t\trequestAnimationFrame(sendResize);\n\t\t\t\t});\n\n\t\t\t\tterm.focus();\n\t\t\t</script></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
